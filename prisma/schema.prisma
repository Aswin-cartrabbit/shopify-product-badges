// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "./client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum TokenType {
  OFFLINE
  ONLINE
}

model stores {
  id       String  @id @unique @default(uuid()) @db.Uuid
  shop     String  @unique
  isActive Boolean @default(false)

  // Relationships
  sessions session[]

  @@index([id])
  @@index([isActive])
}

model session {
  id      String    @id
  type    TokenType
  content String?   @db.Text
  shop    String?
  storeId String    @db.Uuid
  scopes  String?   @db.Text
  expires DateTime?

  store stores @relation(fields: [storeId], references: [id])

  @@index([shop])
  @@index([storeId])
  @@index([type])
}
